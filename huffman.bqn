# Find and use a Huffman code for given text

Huffman â† {
  t â† ğ•©{âŸ¨ğ•¨,âŸ¨âŸ¨ğ•©,""âŸ©âŸ©âŸ©}Â¨â†•â‰ ğ•©  # [âŸ¨prob,[âŸ¨idx,codeâŸ©]âŸ©]
  Prependâ†{ğ•¨âŠ¸âˆ¾âŒ¾(1âŠ¸âŠ‘)Â¨ğ•©}    # sym ğ•Š [âŸ¨idx,codeâŸ©]
  Combineâ†{ âŸ¨a,asâŸ©ğ•ŠâŸ¨b,bsâŸ©: âŸ¨a+b, âˆ¾0â€¿1 PrependÂ¨asâ€¿bsâŸ© }
  Step â† {sâ†âˆ§ğ•© â‹„ (<CombineÂ´2â†‘s) âˆ¾ 2â†“s}
  âˆ¾âˆ˜âŠ”Ë â‰>1âŠ‘âŠ‘ StepâŸ((â‰ t)-1) t
}
Freq â† { (âˆŠğ•©) / (ğ•©âˆ¾Â¨1+âŠ’âŒ¾âŒ½ğ•©) }
MakeTable â† {>HuffmanâŒ¾(1âŠ¸âŠ‘Â¨)Freq ğ•©}

# table {Encode|Decode} text
Encode â† { âŸ¨syms,encsâŸ©â†<Ë˜â‰ğ•¨ â‹„ âˆ¾(symsâŠğ•©)âŠencs }
Decode â† { Â·ğ•Š"": âŸ¨âŸ©;
  iâ†âŠ‘/{ğ•¨â‰¡(â‰ ğ•¨)â†‘ğ•©}âŠ0âŸœğ•©Â¨ 1âŠâ‰ğ•¨
  âŸ¨sym,encâŸ©â†iâŠğ•¨
  sym âˆ¾ (ğ•¨ Decode (â‰ enc)â†“ğ•©)
}

ToBytes â† 2âŠ¸Ã—âŠ¸+ËœÂ´Â¨ {ğ•©âŠ”ËœâŒŠÃ·âŸœ8â†•â‰ ğ•©}
FromBytes â† âˆ¾ {2|âŒŠğ•©Ã·2â‹†â†•8}Â¨

s â† "panama, a camel, animal, canada"

â€¢Show table â† MakeTable s
â€¢Show âŸ¨len,encodedâŸ© â† (â‰ â‹ˆToBytes) table Encode s
â€¢Show table Decode len â†‘ FromBytes encoded
